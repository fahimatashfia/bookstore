<!DOCTYPE html>
<html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Shopping Cart - StoryStack</title>
   <link rel="stylesheet" href="style.css" />
   <link
     rel="stylesheet"
     href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
   />
   <link rel="preconnect" href="https://fonts.googleapis.com" />
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
   <link
     href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;500;600;700&display=swap"
     rel="stylesheet"
   />
   <style>
     /* ----- PAGE HEADER ----- */
     .page-header {
       background: linear-gradient(
         135deg,
         var(--primary-color) 0%,
         var(--secondary-color) 100%
       );
       padding: 5rem 2.5rem 3rem;
       text-align: center;
       position: relative;
       overflow: hidden;
     }


     .page-header::before {
       content: "";
       position: absolute;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)" /></svg>');
       opacity: 0.5;
     }


     .page-header h2 {
       font-family: "Playfair Display", serif;
       font-size: 3.5rem;
       font-weight: 900;
       color: white;
       margin-bottom: 1rem;
       position: relative;
       z-index: 1;
       animation: fadeInUp 0.8s ease-out;
       display: flex;
       align-items: center;
       justify-content: center;
       gap: 1rem;
     }


     .page-header h2 i {
       font-size: 3rem;
     }


     .page-header p {
       font-size: 1.2rem;
       color: rgba(255, 255, 255, 0.9);
       position: relative;
       z-index: 1;
       animation: fadeInUp 0.8s ease-out 0.2s backwards;
     }


     /* ----- CART LAYOUT ----- */
     .cart-main-content {
       max-width: 1400px;
       margin: 0 auto;
       padding: 3rem 2.5rem;
       display: grid;
       grid-template-columns: 1fr 400px;
       gap: 2.5rem;
       align-items: start;
     }


     /* ----- CART ITEMS ----- */
     .cart-items-section {
       animation: fadeInUp 0.6s ease-out;
     }


     .cart-items-header {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 2rem;
     }


     .cart-items-header h3 {
       font-size: 1.8rem;
       font-weight: 700;
       color: var(--text-dark);
       display: flex;
       align-items: center;
       gap: 0.75rem;
     }


     .cart-items-header h3 i {
       color: var(--accent-color);
     }


     .clear-cart-btn {
       background: linear-gradient(135deg, #e74c3c, #c0392b);
       color: white;
       border: none;
       padding: 0.7rem 1.5rem;
       border-radius: 10px;
       cursor: pointer;
       font-weight: 600;
       font-size: 0.9rem;
       transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
       display: flex;
       align-items: center;
       gap: 0.5rem;
     }


     .clear-cart-btn:hover {
       transform: translateY(-2px);
       box-shadow: 0 6px 20px rgba(231, 76, 60, 0.3);
     }


     .cart-items {
       display: flex;
       flex-direction: column;
       gap: 1.5rem;
     }


     .cart-item {
       background: white;
       padding: 1.8rem;
       border-radius: 20px;
       box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
       border: 1px solid rgba(0, 0, 0, 0.05);
       transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
       display: grid;
       grid-template-columns: auto 1fr auto;
       gap: 1.5rem;
       align-items: center;
       animation: slideInLeft 0.5s ease-out backwards;
     }


     .cart-item:hover {
       box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
       border-color: var(--accent-color);
       transform: translateY(-2px);
     }


     .cart-item-icon {
       width: 80px;
       height: 80px;
       background: linear-gradient(
         135deg,
         var(--accent-color),
         var(--accent-light)
       );
       border-radius: 16px;
       display: flex;
       align-items: center;
       justify-content: center;
       font-size: 2rem;
       color: white;
       flex-shrink: 0;
     }


     .cart-item-info {
       flex: 1;
     }


     .cart-item-info h3 {
       color: var(--text-dark);
       font-size: 1.3rem;
       font-weight: 700;
       margin-bottom: 0.5rem;
     }


     .cart-item-category {
       display: inline-flex;
       align-items: center;
       gap: 0.4rem;
       background: linear-gradient(
         135deg,
         rgba(233, 69, 96, 0.1),
         rgba(255, 107, 107, 0.1)
       );
       color: var(--accent-color);
       padding: 0.3rem 0.8rem;
       border-radius: 12px;
       font-size: 0.85rem;
       font-weight: 600;
       margin-bottom: 0.5rem;
     }


     .cart-item-price {
       color: var(--accent-color);
       font-size: 1.5rem;
       font-weight: 700;
       margin-top: 0.5rem;
     }


     .cart-item-actions {
       display: flex;
       flex-direction: column;
       align-items: flex-end;
       gap: 1rem;
     }


     .quantity-controls {
       display: flex;
       align-items: center;
       gap: 0.5rem;
       background: var(--bg-light);
       padding: 0.3rem;
       border-radius: 12px;
     }


     .quantity-controls button {
       width: 40px;
       height: 40px;
       border: none;
       background: white;
       border-radius: 10px;
       cursor: pointer;
       font-weight: 700;
       font-size: 1.2rem;
       color: var(--text-dark);
       transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
       display: flex;
       align-items: center;
       justify-content: center;
     }


     .quantity-controls button:hover {
       background: var(--accent-color);
       color: white;
       transform: scale(1.1);
     }


     .quantity-controls span {
       font-weight: 700;
       font-size: 1.1rem;
       min-width: 35px;
       text-align: center;
       color: var(--text-dark);
     }


     .item-total {
       font-size: 1.3rem;
       font-weight: 700;
       color: var(--text-dark);
       display: flex;
       align-items: center;
       gap: 0.5rem;
     }


     .item-total i {
       color: var(--accent-color);
       font-size: 1rem;
     }


     .remove-btn {
       background: linear-gradient(135deg, #e74c3c, #c0392b);
       color: white;
       border: none;
       padding: 0.6rem 1.2rem;
       border-radius: 10px;
       cursor: pointer;
       font-weight: 600;
       font-size: 0.9rem;
       transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
       display: flex;
       align-items: center;
       gap: 0.5rem;
     }


     .remove-btn:hover {
       transform: translateY(-2px);
       box-shadow: 0 6px 20px rgba(231, 76, 60, 0.3);
     }


     /* ----- CART SUMMARY ----- */
     .cart-summary-section {
       position: sticky;
       top: 100px;
       animation: fadeInUp 0.6s ease-out 0.2s backwards;
     }


     .cart-summary {
       background: white;
       padding: 2rem;
       border-radius: 20px;
       box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
       border: 1px solid rgba(0, 0, 0, 0.05);
     }


     .cart-summary h3 {
       font-size: 1.8rem;
       font-weight: 700;
       color: var(--text-dark);
       margin-bottom: 1.5rem;
       display: flex;
       align-items: center;
       gap: 0.75rem;
     }


     .cart-summary h3 i {
       color: var(--accent-color);
     }


     .summary-divider {
       height: 1px;
       background: linear-gradient(
         90deg,
         transparent,
         rgba(0, 0, 0, 0.1),
         transparent
       );
       margin: 1.5rem 0;
     }


     .summary-row {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 1rem;
       font-size: 1.1rem;
       color: #555;
     }


     .summary-row span:first-child {
       font-weight: 500;
     }


     .summary-row span:last-child {
       font-weight: 700;
     }


     .summary-row.total {
       font-size: 1.8rem;
       font-weight: 700;
       color: var(--accent-color);
       padding-top: 1.5rem;
       border-top: 2px solid rgba(0, 0, 0, 0.1);
       margin-top: 1rem;
     }


     .checkout-btn-wrapper {
       margin-top: 2rem;
     }


     .btn-checkout {
       width: 100%;
       background: linear-gradient(
         135deg,
         var(--accent-color),
         var(--accent-light)
       );
       color: white;
       padding: 1.2rem;
       border: none;
       border-radius: 14px;
       font-weight: 700;
       font-size: 1.1rem;
       cursor: pointer;
       transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
       display: flex;
       align-items: center;
       justify-content: center;
       gap: 0.75rem;
       text-decoration: none;
       box-shadow: 0 6px 24px rgba(233, 69, 96, 0.3);
     }


     .btn-checkout:hover {
       transform: translateY(-3px);
       box-shadow: 0 10px 32px rgba(233, 69, 96, 0.4);
     }


     .continue-shopping {
       margin-top: 1rem;
       text-align: center;
     }


     .continue-shopping a {
       color: var(--accent-color);
       text-decoration: none;
       font-weight: 600;
       font-size: 0.95rem;
       display: flex;
       align-items: center;
       justify-content: center;
       gap: 0.5rem;
       transition: all 0.3s;
     }


     .continue-shopping a:hover {
       gap: 0.75rem;
     }


     /* ----- EMPTY STATE ----- */
     .empty-state {
       text-align: center;
       padding: 5rem 2rem;
       grid-column: 1 / -1;
       animation: fadeInUp 0.6s ease-out;
     }


     .empty-state-icon {
       width: 150px;
       height: 150px;
       background: linear-gradient(
         135deg,
         rgba(233, 69, 96, 0.1),
         rgba(255, 107, 107, 0.1)
       );
       border-radius: 50%;
       display: flex;
       align-items: center;
       justify-content: center;
       margin: 0 auto 2rem;
       font-size: 4rem;
       color: var(--accent-color);
     }


     .empty-state h3 {
       font-size: 2.2rem;
       font-weight: 700;
       color: var(--text-dark);
       margin-bottom: 1rem;
     }


     .empty-state p {
       font-size: 1.2rem;
       color: #7f8c8d;
       margin-bottom: 2rem;
     }


     /* ----- ANIMATIONS ----- */
     @keyframes fadeInUp {
       from {
         opacity: 0;
         transform: translateY(30px);
       }
       to {
         opacity: 1;
         transform: translateY(0);
       }
     }


     @keyframes slideInLeft {
       from {
         opacity: 0;
         transform: translateX(-30px);
       }
       to {
         opacity: 1;
         transform: translateX(0);
       }
     }


     /* Staggered animations */
     .cart-item:nth-child(1) {
       animation-delay: 0.1s;
     }
     .cart-item:nth-child(2) {
       animation-delay: 0.2s;
     }
     .cart-item:nth-child(3) {
       animation-delay: 0.3s;
     }
     .cart-item:nth-child(4) {
       animation-delay: 0.4s;
     }
     .cart-item:nth-child(5) {
       animation-delay: 0.5s;
     }


     /* ----- RESPONSIVE ----- */
     @media (max-width: 1024px) {
       .cart-main-content {
         grid-template-columns: 1fr;
         gap: 2rem;
       }


       .cart-summary-section {
         position: static;
       }
     }


     @media (max-width: 768px) {
       .page-header h2 {
         font-size: 2.5rem;
         flex-direction: column;
         gap: 0.5rem;
       }


       .cart-main-content {
         padding: 2rem 1.5rem;
       }


       .cart-item {
         grid-template-columns: 1fr;
         gap: 1rem;
         text-align: center;
       }


       .cart-item-icon {
         margin: 0 auto;
       }


       .cart-item-actions {
         align-items: center;
       }


       .cart-items-header {
         flex-direction: column;
         gap: 1rem;
         align-items: stretch;
       }
     }


     @media (max-width: 480px) {
       .page-header h2 {
         font-size: 2rem;
       }


       .cart-summary {
         padding: 1.5rem;
       }
     }
   </style>
 </head>
 <body>
   <div class="container">
     <header>
       <div class="navbar">
         <div class="logo">
           <i class="fas fa-book-open"></i>
           <h1>StoryStack</h1>
         </div>
         <nav class="nav-links">
           <a href="index.html" class="nav-link">
             <i class="fas fa-home"></i>
             <span>Home</span>
           </a>
           <a href="products.php" class="nav-link">
             <i class="fas fa-book"></i>
             <span>Browse Books</span>
           </a>
           <a href="cart.html" class="nav-link active cart-link">
             <i class="fas fa-shopping-cart"></i>
             <span>Cart</span>
             <span class="cart-badge" id="cart-count">0</span>
           </a>
         </nav>


         <div id="auth-links" class="auth-nav">
           <a href="about.html" class="nav-link">About Us</a>
           <span class="nav-divider">|</span>
           <a href="login.html" class="nav-link">Login</a>
           <span class="nav-divider">|</span>
           <a href="signup.html" class="btn-signup">Sign Up</a>
         </div>
       </div>
     </header>


     <div class="page-header">
       <h2>
         <i class="fas fa-shopping-cart"></i>
         Your Shopping Cart
       </h2>
       <p id="cart-subtitle">Review your items before checkout</p>
     </div>


     <div class="cart-main-content" id="cart-container">
       <!-- Cart content will be loaded here -->
     </div>


     <footer>
       <p>&copy; 2025 StoryStack - Bookstore. All rights reserved.</p>
     </footer>
   </div>


   <script>
     function getCart() {
       return JSON.parse(localStorage.getItem("cart")) || [];
     }


     function saveCart(cart) {
       localStorage.setItem("cart", JSON.stringify(cart));
       updateCartCount();
     }


     function updateCartCount() {
       const cart = getCart();
       const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
       document.getElementById("cart-count").textContent = totalItems;
     }


     function updateAuthLinks() {
       const user = JSON.parse(localStorage.getItem("user"));
       const authLinks = document.getElementById("auth-links");
       if (user) {
         authLinks.innerHTML = `
           <a href="about.html" class="nav-link">About Us</a>
           <span class="nav-divider">|</span>
           <span class="user-email"><i class="fas fa-user-circle"></i> ${user.username}</span>
           <span class="nav-divider">|</span>
           <a href="#" onclick="logout(); return false;" class="nav-link">Logout</a>
         `;
       } else {
         authLinks.innerHTML = `
           <a href="about.html" class="nav-link">About Us</a>
           <span class="nav-divider">|</span>
           <a href="login.html" class="nav-link">Login</a>
           <span class="nav-divider">|</span>
           <a href="signup.html" class="btn-signup">Sign Up</a>
         `;
       }
     }


     function logout() {
       localStorage.removeItem("user");
       window.location.href = "php/logout.php";
     }


     function displayCart() {
       const cart = getCart();
       const container = document.getElementById("cart-container");


       if (cart.length === 0) {
         container.innerHTML = `
           <div class="empty-state">
             <div class="empty-state-icon">
               <i class="fas fa-shopping-cart"></i>
             </div>
             <h3>Your cart is empty</h3>
             <p>Looks like you haven't added any books yet. Start exploring our collection!</p>
             <a href="products.php" class="btn btn-primary">
               <i class="fas fa-book"></i>
               Browse Books
             </a>
           </div>
         `;
         document.getElementById("cart-subtitle").textContent =
           "Your cart is waiting to be filled!";
         return;
       }


       let total = 0;
       let itemsHtml =
         '<div class="cart-items-section"><div class="cart-items-header"><h3><i class="fas fa-list"></i> Cart Items</h3><button class="clear-cart-btn" onclick="clearCart()"><i class="fas fa-trash"></i> Clear Cart</button></div><div class="cart-items">';


       cart.forEach((item, index) => {
         const itemTotal = item.price * item.quantity;
         total += itemTotal;


         itemsHtml += `
           <div class="cart-item">
             <div class="cart-item-icon">
               <i class="fas fa-book"></i>
             </div>
             <div class="cart-item-info">
               <h3>${item.title}</h3>
               <span class="cart-item-category">
                 <i class="fas fa-tag"></i>
                 ${item.category}
               </span>
               <div class="cart-item-price">$${item.price.toFixed(
                 2
               )} each</div>
             </div>
             <div class="cart-item-actions">
               <div class="quantity-controls">
                 <button onclick="updateQuantity(${index}, -1)"><i class="fas fa-minus"></i></button>
                 <span>${item.quantity}</span>
                 <button onclick="updateQuantity(${index}, 1)"><i class="fas fa-plus"></i></button>
               </div>
               <div class="item-total">
                 <i class="fas fa-equals"></i>
                 $${itemTotal.toFixed(2)}
               </div>
               <button class="remove-btn" onclick="removeItem(${index})">
                 <i class="fas fa-trash-alt"></i>
                 Remove
               </button>
             </div>
           </div>
         `;
       });


       itemsHtml += "</div></div>";


       // Cart Summary
       const summaryHtml = `
         <div class="cart-summary-section">
           <div class="cart-summary">
             <h3><i class="fas fa-receipt"></i> Order Summary</h3>
             <div class="summary-divider"></div>
             <div class="summary-row">
               <span>Subtotal (${cart.reduce(
                 (sum, item) => sum + item.quantity,
                 0
               )} items):</span>
               <span>$${total.toFixed(2)}</span>
             </div>
             <div class="summary-row">
               <span>Shipping:</span>
               <span style="color: #27ae60;">FREE</span>
             </div>
             <div class="summary-row total">
               <span>Total:</span>
               <span>$${total.toFixed(2)}</span>
             </div>
             <div class="checkout-btn-wrapper">
               <a href="checkout.html" class="btn-checkout">
                 <i class="fas fa-lock"></i>
                 Proceed to Checkout
               </a>
             </div>
             <div class="continue-shopping">
               <a href="products.php">
                 <i class="fas fa-arrow-left"></i>
                 Continue Shopping
               </a>
             </div>
           </div>
         </div>
       `;


       container.innerHTML = itemsHtml + summaryHtml;
       document.getElementById("cart-subtitle").textContent = `${
         cart.length
       } ${cart.length === 1 ? "book" : "books"} in your cart`;
     }


     function updateQuantity(index, change) {
       let cart = getCart();
       cart[index].quantity += change;


       if (cart[index].quantity <= 0) {
         cart.splice(index, 1);
       }


       saveCart(cart);
       displayCart();
     }


     function removeItem(index) {
       if (
         confirm("Are you sure you want to remove this item from your cart?")
       ) {
         let cart = getCart();
         cart.splice(index, 1);
         saveCart(cart);
         displayCart();
       }
     }


     function clearCart() {
       if (confirm("Are you sure you want to clear your entire cart?")) {
         localStorage.setItem("cart", JSON.stringify([]));
         updateCartCount();
         displayCart();
       }
     }


     // Navbar scroll effect
     window.addEventListener("scroll", function () {
       const header = document.querySelector("header");
       if (window.scrollY > 50) {
         header.classList.add("scrolled");
       } else {
         header.classList.remove("scrolled");
       }
     });


     // Initialize
     updateCartCount();
     updateAuthLinks();
     displayCart();
   </script>
 </body>
</html>